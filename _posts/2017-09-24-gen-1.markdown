---
title: "유전 알고리즘 - 연산 기법"
layout: post
date: 2017-09-24 23:25
headerImage: false
projects: false
author: simotion
tags: ["Genetic Algorithms", "Algorithm"]
---

> 이 글은 '쉽게 배우는 유전 알고리즘 (문병로 저)'를 읽고 정리한 내용입니다.

# 연산 기법

### 1. 선택 연산

##### 품질 비례 룰렛휠 선택

적합도 (Fitness)에 비례해 유전자가 선택될 확률을 지정한다. (ie. 비용(Cost)에 반비례)

$$C_i$$: i번째 유전자의 비용 <br>
$$C_w$$: 최대의 비용 (최악의 적합도) <br>
$$C_b$$: 최소의 비용 (최고의 적합도) <br>

이라 할 때, 해집단 내 i번째 유전자의 적합도는 다음과 같이 정의된다.

$$f_i =(C_w - C_i) + {C_w-C_i \over k-1}$$

여기서 $$k$$는 선택압으로, 최소 비용의 염색체가 최대 비용의 염색체에 비해 $$k$$배의 높은 확률으로 선택될 수 있도록 한다. $$f_i$$는 $$C_i$$에 대한 선형의 관계를 가지게 된다.
i번째 염색체가 선택될 확률 $$p_i$$는 다음과 같다.

$$ p_i = {C_i \over {\sum\limits_{k} C_k}} $$

이후 $$ [0,1) $$에서 임의의 실수를 고른 후, 대응되는 범위에 해당되는 염색체를 선택한다. <br>
(i번째 유전자가 가지는 범위는 
$$ \left[ \sum \limits_{k=1}^{i-1} p  _{i},\right. \left. \sum \limits_{k=1}^{i} p  _{i} \right)$$
이다.)

##### 토너먼트 선택

두 염색체 $$x_1$$, $$x_2$$에 대해, 일관성을 잃지 않고 $$x_1$$이 $$x_2$$보다 우월하다 가정하자.
임의의 실수 $$p \in [0,1)$$를 선택하자. $$p \lt k$$이면 을 선택하고, $$p \geq k$$이면 를 선택하자.
여기서 $$k$$는 선택압으로, 어떤 비율로 우월한 염색체를 선택할 것인지 결정한다. $$k \lt 0.5$$인 $$k$$를 선택하는 것은 좋지 못한 선택일 것이다.

##### 순위 기반 선택

품질 기반 룰렛휠 선택과 유사하지만, 적합도 차이에 의해 선택 확률이 급격하게 변하지 않고 균일하게 변화하는 방식이다.
$$i$$번째로 비용이 작은 염색체, 즉 $$i$$등의 염색체는 다음과 같은 적합도를 가진다.

$$f_i = M+(m-M) \times {i-1 \over n-1}$$

$$M$$은 최대 적합도, $$m$$은 최소 적합도이다.
룰렛휠 선택과 마찬가지로 $$i$$등의 염색체가 선택될 확률 $$p_i$$는 다음과 같다.

$$ p_i = {C_i \over {\sum\limits_{k} C_k}} $$

##### 공유 선택

세대가 지나도 유전자의 다양성이 유지될 수 있도록 하기 위해 고안된 선택 연산이다.
공유 선택에서의 적합도 $$F_i$$는 다음과 같이 정의된다.

$$F_i = {f_i \over {\sum \limits_{j=1}^{n} s(d_{i, j})}}$$

$$f_i$$는 일반적인 적합도, $$d_{i, j}$$는 염색체 $$i, j$$ 사이의 차이이다.

두 염색체의 차이는 기준에 따라 유전자형 공유와 표현형 공유로 나뉜다. 유전자형 공유는 염색체의 모양 차이, 표현형 공유는 표현형 값의 차이에 따라 $$d_{i, j}$$를 결정한다.
$$s( \cdot )$$는 공유 함수로, 두 염색체 사이의 차가 작을수록 ($$d_{i, j}$$가 작을수록) 큰 값을 가지는 함수이다. 그래야 염색체가 유사할수록 적합도가 작아지기 때문이다. 
예시로 $$ s(d) = 1-({d / \sigma})^2 $$가 있다. ($$\sigma$$는 해집단 내의 최대 $$d_{i, j}$$)

### 2. 교차 연산

교차는 두 부모 염색체의 부분을 교환하며 결합해서 새로운 자식 염색체를 만드는 연산이다.

##### 일점 교차 (One-point Crossover)

하나의 지점에서 교차를 만든다. 길이가 $$n$$인 염색체에 대해 $$n-1$$개의 교차가 가능하다.

##### 다점 교차 (Multi-point Crossover)

여러 점에 대해 교차를 시행한다. 길이가 $$n$$인 염색체에 대해 $$k$$점 교차를 시행하는 경우의 수는 $${}_{n-1}C_{k}$$이다. 가장 오른쪽 유전자의 오른쪽도 교차점이 되도록 허용하면 $${}_{n}C_{k}$$가지인데, 이 방식이 더 합리적이다.

다점 교차는 더 넓은 공간에 대해 탐색할 수 있는 장점이 있지만, 교란이 강하기 때문에 스키마가 파손될 확률이 높다.

##### 균등 교차 (Uniform Crossover)

염색체 $$s_1, s_2$$ 에 대해 균등 교차를 시행하자. 각 유전자에 대해 $$[0, 1]$$에서 난수를 발생시킨 후, 그 값이 특정 값 ($$P_0$$) 이상이면 $$s_1$$에서 유전자를 가져오고, $$P_0$$ 미만이면 $$s_2$$에서 유전자를 가져온다.
균등 교차는 스키마의 결합 형태가 다양한 반면, 교란이 크기에 수렴에 시간이 오래 걸린다.

##### 산술적 교차 (Arthimetic Crossover)

유전자가 실수로 표현되는 염색체에 대한 교차이다. 그냥 평균을 취한다.

##### 간선 재조합 (Edge Recombination)

간선 재조합은 TSP를 위해 개발된 연산이다. 
각 도시에 대해 부모 염색체 $$s_1, s_2$$에서 인접한 도시들의 합집합을 구한다.
인접 도시 수는 모두 겹칠 경우 최소 2개, 하나도 겹치지 않을 경우 최대 4개이다.
자식 염색체를 만들기 위해서는 시작 도시를 구하고,
현재 도시의 인접 도시 목록에 있는 도시 중 가장 인접 도시수가 적은 도시를 고른다 (여러 개일 경우 임의로 하나를 선택한다).
이 과정을 도시의 개수만큼 반복하면 도시를 순회하는 순열을 만들게 된다.

##### PMX (Partially Matched Crossover)

염색체가 순열로 표현되는 경우에 대한 교차 연산이다.부모해 $$s_1, s_2$$에 임의의 교차선 2개를 그은 후, 두 교차선 사이의 구간은 $$s_1$$에서 가져온다.
나머지 구간은 $$s_2$$에서 가져오되, 중복되는 경우 $$s_1$$에서 해당 값을 가지는 위치와 같은 위치의 $$s_2$$에서 가져온다.

아래 예시의 경우 겹치는 숫자에 대해 $$0 \rightarrow 3 \rightarrow 5$$, $$6 \rightarrow 1$$의 과정을 거쳐 다른 값을 가져온다.

![](http://www.aistudy.com/biology/genetic/images/PMX.gif)

##### Cohoon과 Paris의 볼록 교차

2차원 염색체를 위한 교차 연산이다. 이차원 행렬 모양인 부모해 $$s_1$$에서 정사각형을 잘라낸 후, 다른 부모해 $$s_2$$의 해당 부분으로 보충한다.
겹치는 값이 있을 경우 PMX와 같은 원리로 그 값을 갖는 $$s_1$$의 위치와 같은 위치의 $$s_2$$의 값을 가져온다.

![](http://www.aistudy.com/biology/genetic/images/Cohoon_Paris.gif)

> [이미지 출처 (aistudy.net)](http://www.aistudy.com/biology/genetic/operator_moon.htm)